# How to Build a React App in Kotlin

[Video Link (YouTube)](https://www.youtube.com/watch?v=FDOECr-sT6U&index=4&list=PLQ176FUIyIUY6UK1cgVsbdPYA3X5WLam5)
Presented at **Kotlin Conf 2017** by **Dave Ford**

 * Why Kotlin-React?
   * Prob #1: 80% of coding is writing code in one language to output another (e.g. templating languages to produce HTML)
     1. String Building
     2. Tree Building
        * DOM API
     3. Templates
        * JSP
        * Angular Templates
        * Template consist of static parts and parts that change.
          * End up having logic (loops, if, etc)
          * Templates become complicated
          * Templating language usually evolves into a programming language
     4. Internal DSLs
        * JSX (React)
        * Kotlin DSL
   * People often misinterpret separation of concerns
 * In react you never update your UI. You create a function that converts your data
   structure into your UI. Then you update your data structure.
 * New tool `create-react-kotlin-app`
   * Kotlin react wrappers
   * Kotlin's type-safe builders
   * `npm install -g create-react-kotlin-app`
   * Two pieces
     * One globally installed
     * One installed into your app
 * Run by doing:
   * `create-react-kotlin-app my-app-name`
   * Creates an intellij project automatically
   * Follow instructions from the utility.
 * Html is generated by calling Kotlin functions in a render function
 ```kotlin
render(rootDiv) {
  div {
    attrs.title = "This is a title attribute."
    attrs.title = kotlinext.js.js{
      display = "flex"
    }
    +"Hello"
  }
}
```
 * `kotlinext.js.js` gives a way to type in JS to use. Not typesafe. 
 * Creating a reusable UI component
   * No ceremony... just a function
```kotlin
private fun RBuilder.handUi() {
  div {
    +"Player Hand"
  }
}
```
   * Can use extract as function in IntelliJ to generate these functions when refactoring.
   * Easy to create UI components + type safety 
 * Stateful components are classes that extend from RComponent
 
```kotlin
interface AppState : RState {
  var g: Game
}

class app:RComponent<RProps, AppState>() {
  override fun AppState.init() {
    g = Game()
  }

  override fun RBuilder.render() {
    gameUi(state.g)
  }
}
```
   * Class components are called differently
```kotlin
render(rootDiv) {
  child(App::class){}
}
```
 * Creating buttons
```kotlin
button {
  +"Deal"
  attrs.onClickFunction = {
    //Code executed when 
    eh.deak()
  }
}
```
  * Event handlers
```kotlin
interface evHandler {
  fun deal()
  fun hit()
}
```
   * Event handler is passed into the component function
   * Inside functions must call set state
```kotlin
override fun deal() {
  setState {
    g.deal()
  }
}
```